---
title: "High-Dimensional Metrics"
author: "Victor Chernozhukov, Christian Hansen, Martin Spindler"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{High-Dimensional Metrics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Overview

function | methods                              | comment                       | TBD
---------|--------------------------------------|-------------------------------|-------------------------------
rlasso   | summary, print, predict, model.matrix| default and formula interface |
rlogisticlasso |  summary, print, predict, model.matrix | default and forumla interface | rename: rlassologit
rlassoLM | print, summary, confint, plot | default and formula (TBD) interface | rename, polish plot, joint confint
rlassoIV | print, summary, confint | default interface | rename, formula interface
rlassoMany | print, summary, confint | default interface | rename, formula interface |
rlassoATE, rlassoLATE, rlassoATET, rlassoLATET | print, summary, confint | | |

To Do:

* rename functions
* choice of lambda
* joint CIs
* significance for logistic lasso
* wrap function for rlassoIV, rlassoMany, rlassoLM
* formula interface for rlassoIV, rlassoMany: design
* plots for all functions?
* further testing
* documentation and vignettes

# Example
```{r echo=FALSE}
library(hdm2)
```

## rlasso

Generating data:
```{r}
set.seed(2)
n <- 100
p <- 20
px <- 5
X <- matrix(rnorm(n*p), ncol=p)
Xnew <- matrix(rnorm(n*p), ncol=p)
beta <- c(rep(2,px), rep(0,p-px))
y <- X %*% beta + rnorm(n)
```

rlasso

```{r}
l1 <- rlasso(X,y, intercept=TRUE, normalize=TRUE, post=TRUE ) # default interface
l2 <- rlasso(y~X) # formula interface
```

methods for rlasso

```{r}
print(l1)
summary(l1, all=FALSE) # show only coefficient which are not zero
head(predict(l1))
head(predict(l1, newdata=Xnew))
```


## rlogisticlasso
Generating data:
```{r}
set.seed(2)
n <- 100
p <- 20
px <- 5
X <- matrix(rnorm(n*p), ncol=p)
Xnew <- matrix(rnorm(n*p), ncol=p)
beta <- c(rep(2,px), rep(0,p-px))
ystar <-  X %*% beta + rnorm(n)
y <- as.integer(ystar >=0)
```

rlogisticlasso

```{r}
l3 <- rlogisticlasso(X,y, intercept=TRUE, normalize=TRUE, post=TRUE ) # default interface
l4 <- rlogisticlasso(y~X) # formula interface
```

methods for rlogisticlasso

```{r}
print(l3)
#summary(l3, all=FALSE) # show only coefficient which are not zero ########################################
head(predict(l3))
head(predict(l3, newdata=Xnew))
```

## rlassoLM

Generating data:
```{r}
set.seed(2)
n <- 100
p <- 20
px <- 5
X <- matrix(rnorm(n*p), ncol=p)
Xnew <- matrix(rnorm(n*p), ncol=p)
beta <- c(rep(2,px), rep(0,p-px))
y <- X %*% beta + rnorm(n)
```

rlassoLM

```{r}
rLM <- rlassoLM(X,y, index=c(1,2,9)) # I: selection of variables for inference
```

methods
```{r}
print(rLM)
summary(rLM)
confint(rLM)
```

```{r fig.width=5}
#plot(rLM, main="Estimated coefficients for selected variables")
```








